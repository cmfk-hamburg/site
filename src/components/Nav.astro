---
import { getLangFromUrl, useTranslations } from "../i18n/utils";

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

const itemClass = function (path: string) {
	const pathname = new URL(Astro.request.url).pathname;

	return pathname === path ? "nav__item is-active" : "nav__item";
};

---

<nav role="navigation" class="nav">
	<ul class="nav__list">
		<li class={itemClass(`/${lang}/`)}>
			<a href={`/${lang}/`} class="nav__link" title={t("nav.home")}>
				<span class="nav__link-text">{t("nav.home")}</span>
			</a>
		</li>
		<li class={itemClass(`/${lang}/call-for-film/`)}>
			<a
				href={`/${lang}/call-for-film/`}
				class="nav__link"
				title={t("nav.callForFilm")}
			>
				<span class="nav__link-text">
					{t("nav.callForFilm")}
				</span>
			</a>
		</li>
		<li class={itemClass(`/${lang}/about/`)}>
			<a href={`/${lang}/about/`} class="nav__link" title={t("nav.about")}>
				<span class="nav__link-text">
					{t("nav.about")}
				</span>
			</a>
		</li>
		<li class={itemClass(`/${lang}/partner/`)}>
			<a href={`/${lang}/partner/`} class="nav__link" title={t("nav.partner")}>
				<span class="nav__link-text">
					{t("nav.partner")}
				</span>
			</a>
		</li>
		<li class={itemClass(`/${lang}/volunteer/`)}>
			<a
				href={`/${lang}/volunteer/`}
				class="nav__link"
				title={t("nav.volunteer")}
			>
				<span class="nav__link-text">
					{t("nav.volunteer")}
				</span>
			</a>
		</li>
	</ul>
	<div></div>
</nav>

<style lang="scss">
	@import "../styles/variables.scss";
	@import "../styles/fonts.scss";
	@import "../styles/utils.scss";

	.nav {
		position: fixed;
		z-index: 100;
		left: 0;
		right: 0;
		bottom: 8vh;
		display: flex;
		justify-content: center;
		padding: pxToRem(6px);
	}

	.nav__list {
		box-sizing: border-box;
		display: inline-flex;
		flex-wrap: nowrap;
		list-style: none;
		margin: 0;
		padding: pxToRem(4px);
		border-radius: pxToRem(90px);
		overflow: hidden;
		pointer-events: all;
		@include blur-background;
	}

	.nav__item {
		@include f-subtitle-1;

		&.is-active {
			background-color: $c-white;;
			border-radius: pxToRem(90px);
		}
	}

	.nav__link {
		display: flex;
		align-items: center;
		padding-inline: pxToRem(12px);
		height: pxToRem(40px);
		border-radius: pxToRem(90px);
		transition: all $d-anim ease-in-out;
		color: $c-white;;
		background-color: transparent;
		text-decoration: none;

		.is-active & {
			color: black;
		}
	}
</style>
